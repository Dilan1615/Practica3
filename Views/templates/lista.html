{% extends "template.html" %}
{% block content %}
<div class="container mt-6">
    <h1 class="text-center mb-4">Proyectos Energéticos</h1>

    <!-- Mensaje de modificacion -->
    <div class="container mt-3">
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <div class="alert-container">
            {% for category, message in messages %}
            <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {% endfor %}
        </div>
        <script>
            // Auto-cierre después de 5 segundos
            setTimeout(() => {
                const alerts = document.querySelectorAll('.alert');
                alerts.forEach(alert => {
                    alert.classList.remove('show'); // Oculta la alerta
                    setTimeout(() => alert.remove(), 150); // Elimina la alerta del DOM
                });
            }, 5000); // Tiempo en milisegundos
        </script>
        {% endif %}
        {% endwith %}
    </div>

    <!--  BUSQUEDA LINEAL-->
    <div class="mb-4">
        <h4>Búsqueda Lineal</h4>
        <h6 >Nombre del proyecto</h6>
        <form action="{{ url_for('router.search_lineal_nombre', texto='') }}" method="GET"
            class="d-flex align-items-center">
            <div class="form-group me-3 w-auto">
                <input type="text" id="search_texto" name="texto" class="form-control" placeholder="Buscar proyecto..."
                    value="{{ request.args.get('texto', '') }}">
            </div>
            <button type="submit" class="btn btn-primary d-flex align-items-center me-2">
                <i class="bi bi-search me-2"></i> Buscar
            </button>
            <a href="{{ url_for('router.list_proyecto') }}" class="btn btn-secondary">
                Regresar a la lista
            </a>
        </form>
        <h6>Inversionista</h6>
        <form action="{{ url_for('router.search_lineal_inversionista', texto=request.args.get('texto', '')) }}"
            method="GET" class="d-flex align-items-center">
            <div class="form-group me-3 w-auto">
                <input type="text" id="search_texto" name="texto" class="form-control"
                    placeholder="Nombre de Inversionista" value="{{ request.args.get('texto', '') }}">
            </div>
            <button type="submit" class="btn btn-primary d-flex align-items-center me-2">
                <i class="bi bi-search me-2"></i> Buscar
            </button>
            <a href="{{ url_for('router.list_proyecto') }}" class="btn btn-secondary">
                Regresar a la lista
            </a>
        </form>
    </div>

<!--BUSQUEDA BINARIA-->
    <div class="mb-4">
        <h4>Busqueda Binaria</h4>
        <h6>Nombre del proyecto</h6>
        <form action="{{ url_for('router.search_binary_name', texto=request.args.get('texto', '')) }}" method="GET"
            class="d-flex align-items-center">
            <div class="form-group me-3 w-auto">
                <input type="text" id="search_texto" name="texto" class="form-control"
                    placeholder="Nombre de Inversionista" value="{{ request.args.get('texto', '') }}">
            </div>
            <button type="submit" class="btn btn-primary d-flex align-items-center me-2">
                <i class="bi bi-search me-2"></i> Buscar
            </button>
            <a href="{{ url_for('router.list_proyecto') }}" class="btn btn-secondary">
                Regresar a la lista
            </a>
        </form>
        <h6>Inversionista</h6>
        <form action="{{ url_for('router.search_binary_inversionista', texto=request.args.get('texto', '')) }}"
            method="GET" class="d-flex align-items-center">
            <div class="form-group me-3 w-auto">
                <input type="text" id="search_texto" name="texto" class="form-control"
                    placeholder="Nombre de Inversionista" value="{{ request.args.get('texto', '') }}">
            </div>
            <button type="submit" class="btn btn-primary d-flex align-items-center me-2">
                <i class="bi bi-search me-2"></i> Buscar
            </button>
            <a href="{{ url_for('router.list_proyecto') }}" class="btn btn-secondary">
                Regresar a la lista
            </a>
        </form>
    </div>

    <!--QUICK SORT-->
    <div class="mt-3">
        <h4>Ordenar por (Quick Sort)</h4>
        <div class="d-flex align-items-center">
            <div class="me-3">
                <span>Nombre del Proyecto:</span>
                <a href="{{ url_for('router.order_quick', attribute='nombre', type='1') }}"
                    class="btn btn-outline-success btn-sm">Ascendente</a>
                <a href="{{ url_for('router.order_quick', attribute='nombre', type='0') }}"
                    class="btn btn-outline-danger btn-sm">Descendente</a>
            </div>
            <div>
                <span>Nombre del Inversionista:</span>
                <a href="{{ url_for('router.order_quick', attribute='inversionista', type='1') }}"
                    class="btn btn-outline-success btn-sm">Ascendente</a>
                <a href="{{ url_for('router.order_quick', attribute='inversionista', type='0') }}"
                    class="btn btn-outline-danger btn-sm">Descendente</a>
            </div>
        </div>
    </div>
    <!--MERGE SORT-->
    <div class="mt-3">
        <h4>Ordenar por (Merge Sort)</h4>
        <div class="d-flex align-items-center">
            <div class="me-3">
                <span>Nombre del Proyecto:</span>
                <a href="{{ url_for('router.order_merge', attribute='nombre', type='0') }}"
                    class="btn btn-outline-success btn-sm">Ascendente</a>
                <a href="{{ url_for('router.order_merge', attribute='nombre', type='1') }}"
                    class="btn btn-outline-danger btn-sm">Descendente</a>
            </div>
            <div>
                <span>Nombre del Inversionista:</span>
                <a href="{{ url_for('router.order_merge', attribute='inversionista', type='0') }}"
                    class="btn btn-outline-success btn-sm">Ascendente</a>
                <a href="{{ url_for('router.order_merge', attribute='inversionista', type='1') }}"
                    class="btn btn-outline-danger btn-sm">Descendente</a>
            </div>
        </div>
    </div>
    <!--SHELL SORT-->
    <div class="mt-3">
        <h4>Ordenar por (Shell Sort)</h4>
        <div class="d-flex align-items-center">
            <div class="me-3">
                <span>Nombre del Proyecto:</span>
                <a href="{{ url_for('router.order_shell', attribute='nombre', type='0') }}"
                    class="btn btn-outline-success btn-sm">Ascendente</a>
                <a href="{{ url_for('router.order_shell', attribute='nombre', type='1') }}"
                    class="btn btn-outline-danger btn-sm">Descendente</a>
            </div>
            <div>
                <span>Nombre del Inversionista:</span>
                <a href="{{ url_for('router.order_shell', attribute='inversionista', type='0') }}"
                    class="btn btn-outline-success btn-sm">Ascendente</a>
                <a href="{{ url_for('router.order_shell', attribute='inversionista', type='1') }}"
                    class="btn btn-outline-danger btn-sm">Descendente</a>
            </div>
        </div>
    </div>

    <!-- LISTA DE PROYECTOS -->
    
    <div class="card">
        
        <div class="card-body">
            <h3 class="mb-1">Lista de Proyectos</h3>
            <a href="/admin/proyecto/register" class="btn btn-success mb-3">Nuevo</a>
            <table class="table table-dark">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">Nombre del Proyecto</th>
                        <th scope="col">Inversionistas</th>
                        <th scope="col">Inversión</th>
                        <th scope="col">Tiempo de Vida</th>
                        <th scope="col">Fecha de Inicio</th>
                        <th scope="col">Fecha de Finalización</th>
                        <th scope="col">Tipo de Energía</th>
                        <th scope="col">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in lista %}
                    <tr>
                        <td>{{ item.nombre }}</td>
                        <td>{{ item.inversionista }}</td>
                        <td>{{ item.inversion }}</td>
                        <td>{{ item.tiempoVida }}</td>
                        <td>{{ item.inicio }}</td>
                        <td>{{ item.fin }}</td>
                        <td>{{ item.tipo }}</td>
                        <td>
                            <a href="/admin/proyecto/edit/{{ item.id }}" class="btn btn-info">Modificar</a>
                            <a href="/admin/proyecto/delete/{{ item.id }}" class="btn btn-danger">Eliminar</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}